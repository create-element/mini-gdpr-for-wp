!function(){"use strict";class t{constructor(t){this.data=t,this.data.blkon="1"===t.blkon,this.data.always="1"===t.always,this._accepting=!1,this._overlayKeydown=null,this._popupKeydown=null}hasConsented(){if("undefined"!=typeof localStorage){const t=Date.parse(localStorage.getItem(this.data.cn));if(t){const e=new Date;return Math.round((e-t)/1e3)<86400*parseInt(this.data.cd,10)}return!1}return document.cookie.split(";").some(t=>t.split("=")[0].trim().startsWith(this.data.cn))}showPopup(){const t=document.createElement("div");t.id="mgwcsCntr",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Cookie consent"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-describedby","mgwcs-msg"),t.innerHTML=`<p id="mgwcs-msg">${this.data.msg}</p><div class="btn-box"><button class="accept">${this.data.ok}</button><button class="more-info">${this.data.mre}</button></div>`,t.querySelector("button.accept").addEventListener("click",()=>this.consentToScripts()),t.querySelector("button.more-info").addEventListener("click",()=>this.showBlockedScripts()),Array.isArray(this.data.cls)&&(t.className=this.data.cls.join(" ")),document.body.appendChild(t),this._popupKeydown=e=>{if("Tab"!==e.key)return;const n=Array.from(t.querySelectorAll("button")),o=n[0],a=n[n.length-1];e.shiftKey?document.activeElement===o&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),o.focus())},document.addEventListener("keydown",this._popupKeydown),t.querySelector("button.accept").focus()}consentToScripts(){if(this._accepting)return;const t=document.getElementById("mgwcsCntr");if(t){if(this._accepting=!0,this._popupKeydown&&(document.removeEventListener("keydown",this._popupKeydown),this._popupKeydown=null),"undefined"!=typeof localStorage)localStorage.setItem(this.data.cn,new Date);else{const t=new Date;t.setDate(t.getDate()+parseInt(this.data.cd,10)),document.cookie=`${this.data.cn}=true; expires=${t.toUTCString()}; Secure`}this.insertBlockedScripts(),t.classList.add("mgw-fin"),setTimeout(()=>t.remove(),500)}}insertBlockedScripts(){if(this.data.blkon)for(const t in this.data.meta){if(!Object.prototype.hasOwnProperty.call(this.data.meta,t))continue;const e=this.data.meta[t];if(!e["can-defer"])continue;const n=document.createElement("script");if(n.setAttribute("src",e.src),document.head.appendChild(n),e.after){const t=document.createElement("script");t.appendChild(document.createTextNode(e.after)),document.head.appendChild(t)}}}showBlockedScripts(){const t=document.createElement("div");t.id="mgwcsOvly",t.className="mgw-ovl",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Cookie information"),t.addEventListener("click",e=>{e.target===t&&this.closeBlockedScripts()});const e=document.createElement("div");if(e.className="mgw-nfo",e.setAttribute("tabindex","-1"),t.appendChild(e),Object.keys(this.data.meta).length){const t=document.createElement("p");t.innerHTML=this.data.nfo1,this.data.nfo3&&(t.innerHTML+=`<br />${this.data.nfo3}`),e.appendChild(t);const n=document.createElement("ul");for(const t in this.data.meta){if(!Object.prototype.hasOwnProperty.call(this.data.meta,t))continue;const e=document.createElement("li");e.innerHTML=this.data.meta[t].description,n.appendChild(e)}const o=document.createElement("div");o.className="plglst",o.appendChild(n),e.appendChild(o)}else{const t=document.createElement("p");t.innerHTML=this.data.nfo2,e.appendChild(t)}const n=document.createElement("button");n.innerText="Close",n.setAttribute("aria-label","Close cookie information"),n.addEventListener("click",()=>this.closeBlockedScripts()),e.appendChild(n),this._overlayKeydown=t=>{if("Escape"!==t.key){if("Tab"===t.key){const n=Array.from(e.querySelectorAll('button, a[href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(0===n.length)return void t.preventDefault();const o=n[0],a=n[n.length-1];t.shiftKey?document.activeElement===o&&(t.preventDefault(),a.focus()):document.activeElement===a&&(t.preventDefault(),o.focus())}}else this.closeBlockedScripts()},document.addEventListener("keydown",this._overlayKeydown),document.body.appendChild(t),n.focus()}closeBlockedScripts(){this._overlayKeydown&&(document.removeEventListener("keydown",this._overlayKeydown),this._overlayKeydown=null);const t=document.getElementById("mgwcsOvly");t&&t.remove();const e=document.querySelector("#mgwcsCntr button.more-info");e&&e.focus()}init(){this.hasConsented()?this.insertBlockedScripts():this.showPopup()}}document.addEventListener("DOMContentLoaded",()=>{"undefined"!=typeof mgwcsData&&new t(mgwcsData).init()})}();
//# sourceMappingURL=mini-gdpr-cookie-popup.min.js.map