!function(){"use strict";class e{constructor(e){this.config=e,this.init()}init(){document.querySelectorAll("form .mini-gdpr-checkbox").forEach(e=>{const t=e.closest("form");t&&t.addEventListener("submit",t=>this.handleFormSubmit(t,e))}),this.config.acceptAction&&document.querySelectorAll(".mini-gdpr-form .mini-gdpr-checkbox").forEach(e=>{e.addEventListener("change",e=>this.handleCheckboxChange(e))})}handleFormSubmit(e,t){t.checked||(e.preventDefault(),window.alert(this.config.termsNotAccepted))}async handleCheckboxChange(e){const t=e.target;if(!t.checked)return;const n=t.closest(".mini-gdpr-form");t.disabled=!0;const c=new FormData;c.append("action",this.config.acceptAction),c.append("nonce",this.config.acceptNonce),c.append("terms","1");try{const e=await fetch(this.config.ajaxUrl,{method:"POST",body:c}),t=await e.json();this.handleAcceptResponse(t,n)}catch(e){console.error("Mini GDPR: accept request failed.",e),t.disabled=!1}}handleAcceptResponse(e,t){if("1"!==e.success)return;const n=e.message||"OK";t.style.transition="opacity 0.4s",t.style.opacity="0",t.addEventListener("transitionend",()=>{const e=document.createElement("p");e.textContent=n,e.style.opacity="0",e.style.transition="opacity 0.4s",t.insertAdjacentElement("afterend",e),requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.style.opacity="1"})})},{once:!0})}}document.addEventListener("DOMContentLoaded",()=>{"undefined"!=typeof miniWpGdpr&&new e(miniWpGdpr)})}();
//# sourceMappingURL=mini-gdpr.min.js.map