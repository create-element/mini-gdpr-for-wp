!function(){"use strict";class e{constructor(){this.init()}init(){document.querySelectorAll("[data-reset-all-consents]").forEach(e=>{e.addEventListener("click",t=>this.handleResetAllConsents(t,e))})}async handleResetAllConsents(e,t){e.preventDefault();const n=JSON.parse(t.getAttribute("data-reset-all-consents")),s=t.parentElement,a=s?s.querySelector("img"):null;if(!n.confirmMessage||window.confirm(n.confirmMessage)){this.showSpinner(a);try{const e=new FormData;e.append("action",n.action),e.append("nonce",n.nonce);const t=await fetch(ajaxurl,{method:"POST",body:e}),s=await t.json();s.message&&window.alert(s.message)}catch(e){console.error("Mini GDPR: reset consents request failed.",e)}finally{this.hideSpinner(a),t.disabled=!1}}}showSpinner(e){e&&(e.style.opacity="1",e.style.display="")}hideSpinner(e){e&&(e.style.transition="opacity 0.4s",e.style.opacity="0",setTimeout(()=>{e.style.display="none"},400))}}document.addEventListener("DOMContentLoaded",()=>{new e})}();
//# sourceMappingURL=mini-gdpr-admin.min.js.map